** Testbench
** 
**-----------------------------------------------------------------------------------
** This file is the testbench of array.sp and translate the output into digital form.
**
** # Instruction
** Do not change if not necessary.
**-----------------------------------------------------------------------------------

** Options **
** win
.option post ingold=1 symb=1 ACCT NOMOD
** linux
**.option
**+    ARTIST=2
**+    INGOLD=2
**+    PARHIER=LOCAL
**+    PSF=2

** Includes **
.include "../src/sp/array.sp"

** Sub-circuits **
X1 bl_0 bl_1 bl_2 bl_3 bl_4 bl_5 bl_6 bl_7 en 0 out0 out1 out2 out3 out4 out5 out6 out7 out_b0 out_b1 out_b2 out_b3 out_b4 out_b5 out_b6 out_b7 pec rw sl0 sl1 sl2 sl3 sl4 sl5 sl6 sl7 vdd wl0 wl1 wl2 wl3 wl4 wl5 wl6 wl7 wl8 array

** Signals **
v0 vdd 0 DC=1.2V
**v1 clk 0 pulse 0 1.2 2.4e-9 0.1e-9 0.1e-9 2.4e-9 5e-9

.pat en = b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111
.pat pec = b010101010101010101 b010101010101010101 b010101010101010101 b010101010101010101 b010101010101010101 b010101010101010101 b010101010101010101 b010101010101010101 b010101010101010101 b010101010101010101 b010101010101010101 b010101010101010101
.pat rw = b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111 b111111111
v2 en 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 en
v3 pec 0 pat 1.2 0 0 0.1e-9 0.1e-9 2.5e-9 pec
v4 rw 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 rw

.pat pbl_0 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat pbl_1 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat pbl_2 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat pbl_3 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat pbl_4 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat pbl_5 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat pbl_6 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat pbl_7 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
v5 bl_0 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 pbl_0
v6 bl_1 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 pbl_1
v7 bl_2 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 pbl_2
v8 bl_3 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 pbl_3
v9 bl_4 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 pbl_4
v10 bl_5 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 pbl_5
v11 bl_6 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 pbl_6
v12 bl_7 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 pbl_7

.pat sl0 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat sl1 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat sl2 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat sl3 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat sl4 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat sl5 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat sl6 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
.pat sl7 = b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000 b000000000
v13 sl0 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 sl0
v14 sl1 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 sl1
v15 sl2 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 sl2
v16 sl3 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 sl3
v17 sl4 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 sl4
v18 sl5 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 sl5
v19 sl6 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 sl6
v20 sl7 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 sl7

.pat wl0 = b000000000 b000000000 b000000000 b100000000 b100000000 b000000000 b000000000 b100000000 b100000000 b000000000 b100000000 b000000000
.pat wl1 = b000000000 b000000000 b010000000 b010000000 b000000000 b000000000 b010000000 b010000000 b000000000 b010000000 b000000000 b010000000
.pat wl2 = b000000000 b001000000 b001000000 b000000000 b000000000 b000000000 b001000000 b000000000 b001000000 b000000000 b001000000 b000000000
.pat wl3 = b000000000 b000100000 b000100000 b000000000 b000100000 b000000000 b000100000 b000000000 b000100000 b000000000 b000000000 b000000000
.pat wl4 = b000010000 b000010000 b000000000 b000010000 b000000000 b000010000 b000000000 b000010000 b000000000 b000000000 b000000000 b000000000
.pat wl5 = b000001000 b000000000 b000001000 b000000000 b000001000 b000000000 b000001000 b000000000 b000000000 b000000000 b000000000 b000001000
.pat wl6 = b000000100 b000000000 b000000100 b000000000 b000000000 b000000000 b000000100 b000000100 b000000000 b000000100 b000000000 b000000100
.pat wl7 = b000000000 b000000010 b000000000 b000000000 b000000000 b000000000 b000000010 b000000000 b000000010 b000000000 b000000010 b000000010
.pat wl8 = b000000001 b000000000 b000000000 b000000000 b000000000 b000000001 b000000000 b000000001 b000000000 b000000001 b000000001 b000000001
v21 wl0 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 wl0
v22 wl1 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 wl1
v23 wl2 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 wl2
v24 wl3 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 wl3
v25 wl4 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 wl4
v26 wl5 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 wl5
v27 wl6 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 wl6
v28 wl7 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 wl7
v29 wl8 0 pat 1.2 0 0 0.1e-9 0.1e-9 5e-9 wl8

** Models **
.model A2D U LEVEL=4 TIMESTEP=0.1NS TIMESCALE=1
+S0NAME=0 S0VLO=-0.3 S0VHI=0.3
+S1NAME=1 S1VLO=0.7 S1VHI=1.5
+CLOAD=0.1e-15

uc0 out0 0 A2D signame=out0
uc1 out1 0 A2D signame=out1
uc2 out2 0 A2D signame=out2
uc3 out3 0 A2D signame=out3
uc4 out4 0 A2D signame=out4
uc5 out5 0 A2D signame=out5
uc6 out6 0 A2D signame=out6
uc7 out7 0 A2D signame=out7
**uc8 out_b0 0 A2D signame=out_b0
**uc9 out_b1 0 A2D signame=out_b1
**uc10 out_b2 0 A2D signame=out_b2
**uc11 out_b3 0 A2D signame=out_b3
**uc12 out_b4 0 A2D signame=out_b4
**uc13 out_b5 0 A2D signame=out_b5
**uc14 out_b6 0 A2D signame=out_b6
**uc15 out_b7 0 A2D signame=out_b7

** Parameters **
.param period =540ns
.param t0= 0.1ns
.param t1= t0+period
.param t2= t1+0.1ns
.param step= 1ps

**.measure tot_power avg power from 100ns t0 t1

.tran step t2
**.print V(out0) V(out1) V(out2) V(out3) V(out4) V(out5) V(out6) V(out7)
.end